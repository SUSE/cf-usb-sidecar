FROM golang:1.7.4

ENV GOPATH /go
ENV GOBIN /go/bin

RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y \
    git \
    bash \
    make \
    gcc \
    mercurial \
    build-essential \
    && apt-get autoremove -y \
    && apt-get clean -y \
    && rm -rf /var/lib/apt/lists/*

COPY . /go/src/github.com/hpcloud/catalog-service-manager

RUN cd /go/src/github.com/hpcloud/catalog-service-manager \
    && make tools \
    && cd / \
    && rm -rf /go/src/github.com/hpcloud

ENTRYPOINT echo `hostname`
